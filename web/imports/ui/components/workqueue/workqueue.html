<template name="workqueue">
  <h2>Work Queue</h2>

  <table class="table table-hover">
    <thead>
      <th></th>
      <th>Id</th>
      <th>Start Time</th>
      <th>Worker</th>
      <th>Container</th>
      <th>Parameters</th>
      <th>Results</th>
    </thead>
    <tbody>
    {{#each workqueue}}
      <tr class="{{rowColor}}">
        <td>
          {{#if notCancellable}}
          <div class="btn btn-danger" disabled>Cancel</div>
          {{else}}
          <div class="btn btn-danger cancel-work" data-id={{_id}}>Cancel</div>
          {{/if}}
          <a class="btn btn-primary" data-toggle="collapse" href="#collapseLogs-{{_id}}" role="button" aria-expanded="false" aria-controls="collapseLogs-{{_id}}">Logs</a></td>

        <td>{{_id}}</td>
        <td>{{niceTime start_time}}</td>
        <td>{{worker}}</td>
        <td>{{update.container.name}}</td>
        <td>{{json2string parameters}}</td>
        <td>{{json2string result}}</td>
      </tr>
      <tr class="{{rowColor}} collapse" id="collapseLogs-{{_id}}">
        <td colspan="7">
        <h5>Tail of Container Log</h5>
        <pre><code class="bash">{{update.container.logs}}</code></pre>
        </td>
      </tr>
    {{/each}}
    </tbody>
  </table>

</template>
